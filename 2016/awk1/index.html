<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>awk简介 | Xanadu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!--[if lt IE 9]><script src="/js/html5.js"></script><![endif]-->
  <meta name="description" content="pattern scanning and processing language
awk&amp;#x57FA;&amp;#x7840;|&amp;#x4ECE;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x548C;shell&amp;#x4E2D;&amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x57FA;&amp;#x672C;&amp;#x8BED;&amp;#x6CD5;
awk [options] program">
<meta property="og:type" content="article">
<meta property="og:title" content="awk简介">
<meta property="og:url" content="http://yoursite.com/2016/awk1/index.html">
<meta property="og:site_name" content="Xanadu">
<meta property="og:description" content="pattern scanning and processing language
awk&amp;#x57FA;&amp;#x7840;|&amp;#x4ECE;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x548C;shell&amp;#x4E2D;&amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x57FA;&amp;#x672C;&amp;#x8BED;&amp;#x6CD5;
awk [options] program">
<meta property="og:updated_time" content="2016-02-17T16:02:09.965Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="awk简介">
<meta name="twitter:description" content="pattern scanning and processing language
awk&amp;#x57FA;&amp;#x7840;|&amp;#x4ECE;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x548C;shell&amp;#x4E2D;&amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x57FA;&amp;#x672C;&amp;#x8BED;&amp;#x6CD5;
awk [options] program">
  
  
  
<!--    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xanadu</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/xanadu">Home</a>
        
          <a class="main-nav-link" href="/xanadu/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <!--<a id="nav-search-btn" class="nav-icon" title="搜索"></a>-->
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-awk1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/awk1/" class="article-date">
  <time datetime="2016-02-13T15:57:28.000Z" itemprop="datePublished">2016-02-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/默认分组/">默认分组</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      awk简介
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>pattern scanning and processing language</p>
<h2 id="awk_u57FA_u7840_7C_u4ECE_u547D_u4EE4_u884C_u548Cshell_u4E2D_u83B7_u53D6_u6570_u636E"><a href="#awk_u57FA_u7840_7C_u4ECE_u547D_u4EE4_u884C_u548Cshell_u4E2D_u83B7_u53D6_u6570_u636E" class="headerlink" title="awk&#x57FA;&#x7840;|&#x4ECE;&#x547D;&#x4EE4;&#x884C;&#x548C;shell&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;"></a>awk&#x57FA;&#x7840;|&#x4ECE;&#x547D;&#x4EE4;&#x884C;&#x548C;shell&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;</h2><p><strong>&#x57FA;&#x672C;&#x8BED;&#x6CD5;</strong></p>
<p><code>awk [options] program-text file...</code></p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x6253;&#x5370;&#x6240;&#x6709;&#x76EE;&#x5F55;&#x7684;&#x540D;&#x5B57;</span></span><br><span class="line">ls <span class="operator">-l</span> | grep ^d | awk <span class="string">&apos;{print $9}&apos;</span></span><br><span class="line">ls <span class="operator">-l</span> | awk <span class="string">&apos;/^d/{print $9}&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># kill&#x6240;&#x6709;was&#x7528;&#x6237;java&#x8FDB;&#x7A0B;</span></span><br><span class="line">ps -ef | grep was | grep java | grep -v grep | awk <span class="string">&apos;{print $2}&apos;</span> | xargs <span class="built_in">kill</span> -<span class="number">9</span></span><br><span class="line">ps -ef | awk <span class="string">&apos;/was/&amp;&amp;/java/{print $2}&apos;</span> | xargs <span class="built_in">kill</span> -<span class="number">9</span></span><br><span class="line">ps -ef | awk <span class="string">&apos;$1~/was/ &amp;&amp; $6~/java/{print $2}&apos;</span> | xargs <span class="built_in">kill</span> -<span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x7B2C;1&#x548C;3&#x5217;</span></span><br><span class="line">cat file1 | awk <span class="string">&apos;{print $1,$3}&apos;</span> <span class="comment">#&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5272;</span></span><br><span class="line">cat file1 | awk <span class="string">&apos;{print $1 $3}&apos;</span> <span class="comment">#&#x5C06;2&#x4E2A;&#x5B57;&#x6BB5;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8BBE;&#x5B9A;&#x8F93;&#x5165;&#x5206;&#x9694;&#x7B26;</span></span><br><span class="line">cat file3 | awk -F, <span class="string">&apos;{print $0}&apos;</span> <span class="comment">#&#x4F7F;&#x7528;&#x9017;&#x53F7;(,)&#x5206;&#x5272;</span></span><br><span class="line">cat file3 | awk -F<span class="string">&quot;||&quot;</span> <span class="string">&apos;{print $0}&apos;</span> <span class="comment">#&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x7AD6;&#x7EBF;(||)&#x5206;&#x5272;</span></span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p><strong>&#x7B80;&#x660E;&#x8BED;&#x6CD5;</strong></p>
<ul>
<li>awk&#x547D;&#x4EE4;&#x5305;&#x542B;&#x5728;&#x4E00;&#x5BF9;&#x5355;&#x5F15;&#x53F7;(&#x2018;&#x2019;)&#x4E2D;&#xFF0C;&#x5355;&#x5F15;&#x53F7;&#x5728;shell&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x547D;&#x4EE4;&#x88AB;&#x9884;&#x89E3;&#x6790;</li>
<li>&#x57FA;&#x672C;&#x8BED;&#x6CD5;: <code>&apos;pattern1{action1} pattern2{action2}...&apos;</code>,&#x4E0B;&#x6587;&#x4F7F;&#x7528;&#x5339;&#x914D;&#x6A21;&#x5F0F;+&#x4EE3;&#x7801;&#x5757;&#x4EE3;&#x8868;pattern&#x548C;action</li>
<li>&#x5904;&#x7406;&#x6D41;&#x7A0B;&#xFF1A;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x6216;&#x7BA1;&#x9053;&#x6BCF;&#x4E00;&#x884C;<strong>&#x8BB0;&#x5F55;</strong>&#x3002;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x7B26;&#x5408;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#xFF0C;&#x7B26;&#x5408;&#x5219;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x5757;;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x68C0;&#x67E5;&#x4E0B;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x6A21;&#x5F0F;(&#x6BCF;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x662F;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x8FDB;&#x5165;&#x6761;&#x4EF6;)</li>
<li>&#x5BF9;&#x8BFB;&#x53D6;&#x7684;&#x6BCF;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;$0&#x8868;&#x793A;&#x6574;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;$1&#x8868;&#x793A;&#x8BE5;&#x8BB0;&#x5F55;&#x7684;&#x7B2C;&#x4E00;&#x5217;&#xFF0C;$N&#x8868;&#x793A;&#x7B2C;N&#x5217;</li>
<li>/pattern1/(&#x6709;&#x53CC;&#x659C;&#x7EBF;)&#x8868;&#x793A;&#x5728;&#x6574;&#x884C;&#x5339;&#x914D;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E;$0~/pattern/&#xFF0C;&#x540C;&#x7406;$1~/was/&#x610F;&#x4E3A;&#x7B2C;&#x4E00;&#x5217;&#x5339;&#x914D;&#x5355;&#x8BCD;was&#x3002;pattern&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x8868;&#x793A;&#x5339;&#x914D;&#x6210;&#x529F;</li>
<li>&#x4EE3;&#x7801;&#x5757;action&#x4F4D;&#x4E8E;{}&#x5185;&#x3002;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x8868;&#x793A;{print $0}</li>
<li>print&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x8F93;&#x51FA;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;&#x7528;&#x9017;&#x53F7;(,)&#x5206;&#x5272;&#x8868;&#x793A;&#x8F93;&#x51FA;&#x7684;&#x5B57;&#x6BB5;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5272;&#xFF1B;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x5206;&#x5272;&#x8868;&#x793A;&#x5C06;&#x591A;&#x4E2A;&#x8F93;&#x51FA;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x8D77;(&#x7B49;&#x4EF7;&#x4E8E;java&#x4E2D;&#x7684;&#x52A0;&#x53F7;)</li>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-F&#x53C2;&#x6570;&#x4FEE;&#x6539;&#x8F93;&#x5165;&#x5206;&#x9694;&#x7B26;</li>
<li>&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x548C;&#x4EE3;&#x7801;&#x5757;&#x5728;&#x4E0B;&#x6587;&#x6709;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</li>
</ul>
<h2 id="awk_u8FDB_u9636_7C_u7B80_u5355_u7684_u903B_u8F91"><a href="#awk_u8FDB_u9636_7C_u7B80_u5355_u7684_u903B_u8F91" class="headerlink" title="awk&#x8FDB;&#x9636;|&#x7B80;&#x5355;&#x7684;&#x903B;&#x8F91;"></a>awk&#x8FDB;&#x9636;|&#x7B80;&#x5355;&#x7684;&#x903B;&#x8F91;</h2><p><strong>&#x5185;&#x7F6E;&#x53D8;&#x91CF;(&#x5E38;&#x7528;)</strong></p>
<table>
<thead>
<tr>
<th>&#x7B26;&#x53F7;</th>
<th>&#x5168;&#x79F0;</th>
<th>&#x4E2D;&#x6587;</th>
<th>&#x63CF;&#x8FF0;</th>
<th>&#x8D4B;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td>NF</td>
<td>Number of Field</td>
<td>&#x57DF;&#x4E2A;&#x6570;</td>
<td>&#x5E38;&#x7528;&#x4E8E;&#x5FAA;&#x73AF;&#x3001;&#x5224;&#x65AD;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>NR</td>
<td>Number of Read</td>
<td>&#x5DF2;&#x8BFB;&#x8BB0;&#x5F55;&#x6570;</td>
<td>&#x6253;&#x5F00;&#x591A;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x6E05;0</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>FNR</td>
<td>File Number of Read</td>
<td>&#x6587;&#x4EF6;&#x5DF2;&#x8BFB;&#x8BB0;&#x5F55;&#x6570;</td>
<td>&#x6253;&#x5F00;&#x591A;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x65B0;&#x6587;&#x4EF6;&#x6E05;0</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
</tbody>
</table>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4F7F;&#x7528;&#x53D8;&#x91CF;</span></span><br><span class="line">awk <span class="string">&apos;{print &quot;&#x603B;&#x7B2C;&quot; NR &quot;&#x884C;,&#x6587;&#x4EF6;&#x7B2C;&quot; FNR &quot;&#x884C;,&#x8BE5;&#x884C;&#x5305;&#x542B;&quot; NF &quot;&#x5217;&quot;}&apos;</span> file1 file2</span><br><span class="line"><span class="comment"># &#x4E3A;&#x6587;&#x4EF6;&#x589E;&#x52A0;&#x884C;&#x53F7;</span></span><br><span class="line">awk <span class="string">&apos;{print NR,$0}&apos;</span> file1</span><br></pre></td></tr></table></figure></p>
<p><strong>&#x5339;&#x914D;&#x6A21;&#x5F0F;</strong></p>
<table>
<thead>
<tr>
<th>&#x6A21;&#x5F0F;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x7A7A;</td>
<td>&#x76F4;&#x63A5;&#x6267;&#x884C;</td>
</tr>
<tr>
<td>BEGIN</td>
<td>&#x5728;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x524D;&#x6267;&#x884C;</td>
</tr>
<tr>
<td>END</td>
<td>&#x5728;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x5904;&#x7406;&#x540E;&#x6267;&#x884C;</td>
</tr>
<tr>
<td>/regular expression/</td>
<td>&#x5339;&#x914D;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6267;&#x884C;</td>
</tr>
<tr>
<td>relational expression</td>
<td>&#x7B26;&#x5408;&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x6267;&#x884C;</td>
</tr>
</tbody>
</table>
<ul>
<li>BEGIN&#x548C;END&#x5757;&#x5728;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x524D;&#x540E;&#x6267;&#x884C;&#xFF0C;&#x901A;&#x5E38;&#x5728;BRGIN&#x5757;&#x4E2D;&#x521D;&#x59CB;&#x5316;&#x53D8;&#x91CF;&#x6216;&#x6253;&#x5370;&#x8868;&#x5934;&#xFF0C;&#x5728;END&#x5757;&#x4E2D;&#x8F93;&#x51FA;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x6216;&#x6253;&#x5370;&#x8868;&#x5C3E;</li>
<li>&#x5982;&#x679C;&#x53EA;&#x5305;&#x542B;BEGIN&#x548C;END&#x5757;&#xFF0C;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6216;&#x7BA1;&#x9053;(&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7F16;&#x5199;&#x4EE3;&#x7801;)</li>
<li>&#x9664;&#x4EE5;&#x4E0A;&#x4E94;&#x6761;&#xFF0C;&#x8FD8;&#x652F;&#x6301;<strong>&#x903B;&#x8F91;&#x8868;&#x8FBE;&#x5F0F;</strong>&#xFF0C;&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;&#xFF1A;&#x903B;&#x8F91;&#x4E0E;(&amp;&amp;)&#xFF0C;&#x903B;&#x8F91;&#x6216;(||)&#xFF0C;&#x903B;&#x8F91;&#x975E;(!)</li>
<li><strong>&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;</strong>&#x5305;&#x62EC;&#x5C0F;&#x4E8E;(&lt;)&#xFF0C;&#x5927;&#x4E8E;(&gt;)&#xFF0C;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;(&lt;=)&#xFF0C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;(&gt;=)&#xFF0C;&#x7B49;&#x4E8E;(==)&#xFF0C;&#x4E0D;&#x7B49;&#x4E8E;(!=)&#xFF0C;&#x5339;&#x914D;(~)&#xFF0C;&#x4E0D;&#x5339;&#x914D;(!~)</li>
</ul>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x7EDF;&#x8BA1;&#x6587;&#x4EF6;&#x4E2A;&#x6570;</span></span><br><span class="line">ls | awk <span class="string">&apos;BEGIN{sum=0} {sum++} END{print sum}&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x7EDF;&#x8BA1;&#x6587;&#x4EF6;&#x5185;&#x7A7A;&#x884C;&#x6570;</span></span><br><span class="line">awk <span class="string">&apos;/^$/{sum++} END{print sum}&apos;</span> file1 <span class="comment">#&#x672A;&#x521D;&#x59CB;&#x5316;&#x6570;&#x503C;&#x53D8;&#x91CF;&#x9ED8;&#x8BA4;&#x4E3A;0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x663E;&#x793A;&#x6587;&#x4EF6;11-20&#x884C;</span></span><br><span class="line">awk <span class="string">&apos;NR&gt;=11 &amp;&amp; NR&lt;=20&apos;</span> file1</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x663E;&#x793A;&#x5927;&#x4E8E;4K&#x7684;&#x666E;&#x901A;&#x6587;&#x4EF6;</span></span><br><span class="line">ls <span class="operator">-l</span> | awk <span class="string">&apos;$1~/^-/ &amp;&amp; $5&gt;4096&apos;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="awk_u9AD8_u7EA7_7C_u50CFc_u8BED_u8A00_u4E00_u6837_u4F7F_u7528awk"><a href="#awk_u9AD8_u7EA7_7C_u50CFc_u8BED_u8A00_u4E00_u6837_u4F7F_u7528awk" class="headerlink" title="awk&#x9AD8;&#x7EA7;|&#x50CF;c&#x8BED;&#x8A00;&#x4E00;&#x6837;&#x4F7F;&#x7528;awk"></a>awk&#x9AD8;&#x7EA7;|&#x50CF;c&#x8BED;&#x8A00;&#x4E00;&#x6837;&#x4F7F;&#x7528;awk</h2><h3 id="u4F7F_u7528_u811A_u672C_u6587_u4EF6_u4E0E_u53C2_u6570_u4F20_u9012"><a href="#u4F7F_u7528_u811A_u672C_u6587_u4EF6_u4E0E_u53C2_u6570_u4F20_u9012" class="headerlink" title="&#x4F7F;&#x7528;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4E0E;&#x53C2;&#x6570;&#x4F20;&#x9012;"></a>&#x4F7F;&#x7528;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4E0E;&#x53C2;&#x6570;&#x4F20;&#x9012;</h3><p><strong>&#x4F7F;&#x7528;&#x811A;&#x672C;</strong></p>
<p>&#x8BED;&#x6CD5; <code>awk -f scriptfile files...</code></p>
<ul>
<li>&#x5C06;awk&#x4F5C;&#x4E3A;&#x7A0B;&#x5E8F;&#x800C;&#x975E;&#x547D;&#x4EE4;&#xFF0C;&#x4E00;&#x822C;&#x4FDD;&#x5B58;&#x4E3A;&#x4EE5;.awk&#x4E3A;&#x540E;&#x7F00;&#x7684;&#x811A;&#x672C;&#x6587;&#x4EF6;</li>
<li>&#x53C2;&#x6570;&#x6709;2&#x79CD;&#x4F20;&#x9012;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x79CD;&#x4E3A;&#x533F;&#x540D;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x4F20;&#x9012;&#xFF0C;&#x8FD9;&#x91CC;&#x79F0;&#x4F5C;<strong>&#x4F20;&#x9012;&#x53C2;&#x6570;</strong>&#xFF1B;&#x53E6;&#x4E00;&#x79CD;&#x4E3A;&#x547D;&#x540D;&#x4F20;&#x9012;&#xFF0C;&#x8FD9;&#x91CC;&#x79F0;&#x4F5C;<strong>&#x4F20;&#x9012;&#x53D8;&#x91CF;</strong></li>
</ul>
<p><strong>&#x4F20;&#x9012;&#x53C2;&#x6570;</strong></p>
<p>&#x8BED;&#x6CD5; <code>awk -f scriptfile args...</code></p>
<ul>
<li>&#x53C2;&#x6570;&#xFF1A;&#x7C7B;&#x4F3C;c/java/shell&#x7B49;&#x8BED;&#x8A00;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x4F20;&#x5165;&#x6570;&#x7EC4;args&#x4F5C;&#x4E3A;&#x53C2;&#x6570;</li>
<li>&#x4F7F;&#x7528;&#x5185;&#x7F6E;&#x53D8;&#x91CF;ARGC&#x548C;ARGV&#x6765;&#x83B7;&#x53D6;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#x3002;&#x5176;&#x4E2D;ARGV[0]&#x4EE3;&#x8868;&#x547D;&#x4EE4;&#x672C;&#x8EAB;</li>
<li>&#x4E00;&#x65E6;&#x4F7F;&#x7528;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x4F1A;&#x5C06;&#x53C2;&#x6570;&#x4F5C;&#x4E3A;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x3002;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x53C2;&#x6570;&#x65F6;&#x4EE3;&#x7801;&#x4E2D;&#x5E94;&#x53EA;&#x5305;&#x542B;BEGIN&#x548C;END&#x5757;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cat args1.awk</span><br><span class="line">BEGIN{</span><br><span class="line">        <span class="built_in">print</span> ARGV[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span> ARGV[<span class="number">1</span>]</span><br><span class="line">        <span class="built_in">print</span> ARGV[<span class="number">2</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">$ awk <span class="operator">-f</span> args1.awk p1 p2</span><br><span class="line">awk</span><br><span class="line">p1</span><br><span class="line">p2</span><br><span class="line"></span><br><span class="line">$ cat args2.awk</span><br><span class="line">BEGIN{</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;ARGC;i++)</span><br><span class="line">        {</span><br><span class="line">                <span class="built_in">print</span> ARGV[i]</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">$ awk <span class="operator">-f</span> args2.awk p1 p2</span><br><span class="line">p1</span><br><span class="line">p2</span><br></pre></td></tr></table></figure>
<p><strong>&#x4F20;&#x9012;&#x53D8;&#x91CF;</strong></p>
<p>&#x8BED;&#x6CD5; <code>awk -v var=value -f scriptfile files...</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4FEE;&#x6539;&#x8F93;&#x5165;&#x5206;&#x9694;&#x7B26;</span></span><br><span class="line">awk -v FS=, <span class="string">&apos;{print $0}&apos;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x4F20;&#x9012;&#x53D8;&#x91CF;</span></span><br><span class="line">awk -v a=<span class="number">1</span> -v b=<span class="number">2</span> <span class="string">&apos;BEGIN{print a,b}&apos;</span></span><br></pre></td></tr></table></figure>
<h3 id="u53D8_u91CF_u4E0E_u6570_u7EC4"><a href="#u53D8_u91CF_u4E0E_u6570_u7EC4" class="headerlink" title="&#x53D8;&#x91CF;&#x4E0E;&#x6570;&#x7EC4;"></a>&#x53D8;&#x91CF;&#x4E0E;&#x6570;&#x7EC4;</h3><p><strong>&#x5185;&#x7F6E;&#x53D8;&#x91CF;</strong></p>
<table>
<thead>
<tr>
<th>&#x7B26;&#x53F7;</th>
<th>&#x5168;&#x79F0;</th>
<th>&#x4E2D;&#x6587;</th>
<th>&#x63CF;&#x8FF0;</th>
<th>&#x8D4B;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td>NF</td>
<td>Number of Field</td>
<td>&#x57DF;&#x4E2A;&#x6570;</td>
<td>&#x5E38;&#x7528;&#x4E8E;&#x5FAA;&#x73AF;&#x3001;&#x5224;&#x65AD;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>NR</td>
<td>Number of Read</td>
<td>&#x5DF2;&#x8BFB;&#x8BB0;&#x5F55;&#x6570;</td>
<td>&#x6253;&#x5F00;&#x591A;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x6E05;0</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>FNR</td>
<td>File Number of Read</td>
<td>&#x6587;&#x4EF6;&#x5DF2;&#x8BFB;&#x8BB0;&#x5F55;&#x6570;</td>
<td>&#x6253;&#x5F00;&#x591A;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x65B0;&#x6587;&#x4EF6;&#x6E05;0</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>FS</td>
<td>Field Separator</td>
<td>&#x57DF;&#x5206;&#x9694;&#x7B26;</td>
<td>&#x9ED8;&#x8BA4;&#x4E3A;\s,&#x5373;tab&#x6216;&#x7A7A;&#x683C;</td>
<td>&#x7528;&#x6237;</td>
</tr>
<tr>
<td>OFS</td>
<td>Output Field Separator</td>
<td>&#x8F93;&#x51FA;&#x57DF;&#x5206;&#x9694;&#x7B26;</td>
<td>&#x9ED8;&#x8BA4;&#x4E3A;\s,&#x5373;tab&#x6216;&#x7A7A;&#x683C;</td>
<td>&#x7528;&#x6237;</td>
</tr>
<tr>
<td>RS</td>
<td>Record Separator</td>
<td>&#x884C;&#x5206;&#x9694;&#x7B26;</td>
<td>&#x9ED8;&#x8BA4;&#x4E3A;\n</td>
<td>&#x7528;&#x6237;</td>
</tr>
<tr>
<td>ORS</td>
<td>Output Record Separator</td>
<td>&#x8F93;&#x51FA;&#x884C;&#x5206;&#x9694;&#x7B26;</td>
<td>&#x9ED8;&#x8BA4;&#x4E3A;\n</td>
<td>&#x7528;&#x6237;</td>
</tr>
<tr>
<td>CONVFMT</td>
<td>Convert Format</td>
<td>&#x8F6C;&#x6362;&#x8F93;&#x51FA;&#x683C;&#x5F0F;</td>
<td>&#x9ED8;&#x8BA4;&#x4E3A;%.6g</td>
<td>&#x7528;&#x6237;</td>
</tr>
<tr>
<td>FILENAME</td>
<td></td>
<td>&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x540D;</td>
<td>&#x591A;&#x6587;&#x4EF6;&#x6216;&#x4E3B;&#x52A8;&#x6253;&#x5F00;&#x6587;&#x4EF6;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>ENVIRON</td>
<td></td>
<td>&#x73AF;&#x5883;&#x53D8;&#x91CF;</td>
<td>&#x6570;&#x7EC4;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>ARGV</td>
<td>Argument Value</td>
<td>&#x53C2;&#x6570;&#x503C;</td>
<td>&#x6570;&#x7EC4;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>ARGC</td>
<td>Argument Count</td>
<td>&#x53C2;&#x6570;&#x957F;&#x5EA6;</td>
<td>&#x6574;&#x6570;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>RLENGTH</td>
<td></td>
<td>&#x5339;&#x914D;&#x957F;&#x5EA6;</td>
<td>&#x8C03;&#x7528;match()&#x51FD;&#x6570;&#x540E;&#x8FD4;&#x56DE;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
<tr>
<td>RSTART</td>
<td></td>
<td>&#x5339;&#x914D;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;</td>
<td>&#x8C03;&#x7528;match()&#x51FD;&#x6570;&#x540E;&#x8FD4;&#x56DE;</td>
<td>&#x7CFB;&#x7EDF;</td>
</tr>
</tbody>
</table>
<ul>
<li>RS&#x8BBE;&#x7F6E;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x7A7A;&#x884C;&#x4E3A;&#x5206;&#x9694;&#x7B26;</li>
</ul>
<p><strong>&#x53D8;&#x91CF;</strong></p>
<ul>
<li>&#x53D8;&#x91CF;&#x6CA1;&#x6709;&#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x9700;&#x8981;&#x65F6;&#x53EF;&#x4EE5;&#x4E92;&#x76F8;&#x8F6C;&#x6362;</li>
<li>&#x672A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F5C;&#x4E3A;&#x6574;&#x6570;&#x4F7F;&#x7528;&#x65F6;&#x662F;0&#xFF0C;&#x4F5C;&#x4E3A;&#x6D6E;&#x70B9;&#x4F7F;&#x7528;&#x65F6;&#x662F;0.0</li>
<li>&#x4E00;&#x822C;&#x5B9A;&#x4E49;&#x5728;BEGIN&#x5757;&#x5185;</li>
</ul>
<p><strong>&#x6570;&#x7EC4;</strong></p>
<ul>
<li>&#x6570;&#x7EC4;&#x6709;2&#x79CD;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#xFF0C;&#x7EBF;&#x6027;&#x8868;&#x548C;&#x6563;&#x5217;&#x8868;</li>
<li>&#x7EBF;&#x6027;&#x8868;&#x4F7F;&#x7528;&#x6570;&#x5B57;&#x4E0B;&#x6807;&#xFF0C;array[1],array[2]&#x8BBF;&#x95EE;&#x5143;&#x7D20;</li>
<li>&#x6563;&#x5217;&#x8868;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x4E0B;&#x6807;&#xFF0C;array[&#x201C;name&#x201D;],array[&#x201C;age&#x201D;]&#x8BBF;&#x95EE;&#x5143;&#x7D20;</li>
<li>&#x5185;&#x7F6E;&#x53D8;&#x91CF;ENVIRON&#xFF0C;&#x5373;&#x4E3A;&#x4E00;&#x4E2A;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x6B64;&#x6570;&#x7EC4;&#x8BBF;&#x95EE;&#x73AF;&#x5883;&#x53D8;&#x91CF;</li>
<li>&#x6D4B;&#x8BD5;&#x5143;&#x7D20;<code>if(&quot;PATH&quot; in ENVIRON)</code> &#x6D4B;&#x8BD5;&#x4E0B;&#x6807;&#x201D;PATH&#x201D;&#x662F;&#x5426;&#x5728;&#x6570;&#x7EC4;ENVIRON&#x5185;</li>
</ul>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">
</span><br></pre></td></tr></table></figure></p>
<h3 id="u63A7_u5236_u7ED3_u6784"><a href="#u63A7_u5236_u7ED3_u6784" class="headerlink" title="&#x63A7;&#x5236;&#x7ED3;&#x6784;"></a>&#x63A7;&#x5236;&#x7ED3;&#x6784;</h3><p>&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;man awk</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) statement [ <span class="keyword">else</span> statement ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (condition) statement</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> statement <span class="keyword">while</span> (condition)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (expr1; expr2; expr3) statement</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (var <span class="keyword">in</span> array) statement</span><br><span class="line"></span><br><span class="line"><span class="built_in">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">continue</span></span><br><span class="line"></span><br><span class="line">delete array[index]</span><br><span class="line"></span><br><span class="line">delete array</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> [ expression ]</span><br><span class="line"></span><br><span class="line">{ statements }</span><br><span class="line"></span><br><span class="line">switch (expression) {</span><br><span class="line">    <span class="keyword">case</span> value|regex : statement</span><br><span class="line">    ...</span><br><span class="line">    [ default: statement ]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="u51FD_u6570"><a href="#u51FD_u6570" class="headerlink" title="&#x51FD;&#x6570;"></a>&#x51FD;&#x6570;</h3><p><strong>&#x6570;&#x5B66;&#x51FD;&#x6570;</strong></p>
<table>
<thead>
<tr>
<th>&#x51FD;&#x6570;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>cos(x)</td>
<td>&#x8FD4;&#x56DE;x&#x7684;&#x4F59;&#x5F26;(x&#x4E3A;&#x5F27;&#x5EA6;)</td>
</tr>
<tr>
<td>sin(x)</td>
<td>&#x8FD4;&#x56DE;x&#x7684;&#x6B63;&#x5F26;(x&#x4E3A;&#x5F27;&#x5EA6;)</td>
</tr>
<tr>
<td>atan2(x)</td>
<td>&#x8FD4;&#x56DE;y/x&#x7684;&#x6B63;&#x53CD;&#x5207;&#xFF0C;&#x503C;&#x5728;-&#x3C0;&#x5230;&#x3C0;&#x4E4B;&#x95F4;</td>
</tr>
<tr>
<td>exp(x)</td>
<td>&#x8FD4;&#x56DE;e&#x7684;x&#x6B21;&#x5E42;</td>
</tr>
<tr>
<td>log(x)</td>
<td>&#x8FD4;&#x56DE;x&#x7684;&#x81EA;&#x7136;&#x5BF9;&#x6570;(&#x4EE5;e&#x4E3A;&#x5E95;)</td>
</tr>
<tr>
<td>sqrt(x)</td>
<td>&#x8FD4;&#x56DE;x&#x7684;&#x5E73;&#x65B9;&#x6839;</td>
</tr>
<tr>
<td>int(x)</td>
<td>&#x8FD4;&#x56DE;x&#x7684;&#x6574;&#x6570;&#x90E8;&#x5206;</td>
</tr>
<tr>
<td>rand(x)</td>
<td>&#x8FD4;&#x56DE;&#x968F;&#x673A;&#x6570;r,0&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;r&#x5C0F;&#x4E8E;1</td>
</tr>
</tbody>
</table>
<p><strong>&#x5B57;&#x7B26;&#x4E32;&#x51FD;&#x6570;</strong></p>
<table>
<thead>
<tr>
<th>&#x51FD;&#x6570;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>gsub(r, s [, t])</td>
<td>&#x5728;&#x5B57;&#x7B26;&#x4E32;t&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;s&#x66FF;&#x6362;&#x5339;&#x914D;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;r&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD4;&#x56DE;&#x66FF;&#x6362;&#x7684;&#x4E2A;&#x6570;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;t&#xFF0C;&#x9ED8;&#x8BA4;$0</td>
</tr>
<tr>
<td>index(s, t)</td>
<td>&#x8FD4;&#x56DE;&#x5B50;&#x4E32;t&#x5728;&#x5B57;&#x7B26;&#x4E32;s&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;</td>
</tr>
<tr>
<td>length([s])</td>
<td>&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;s&#x7684;&#x957F;&#x5EA6;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;s&#xFF0C;&#x8FD4;&#x56DE;$0&#x7684;&#x957F;&#x5EA6;</td>
</tr>
<tr>
<td>match(s, r)</td>
<td>&#x5982;&#x679C;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;r&#x5728;s&#x4E2D;&#x51FA;&#x73B0;&#xFF0C;&#x8FD4;&#x56DE;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x8FD4;&#x56DE;0&#x3002;&#x8BBE;&#x7F6E;RSTART&#x548C;RLENGTH&#x7684;&#x503C;</td>
</tr>
<tr>
<td>split(s, a [, seps])</td>
<td>&#x4F7F;&#x7528;&#x5206;&#x9694;&#x7B26;sep&#x5C06;&#x5B57;&#x7B26;&#x4E32;s&#x5206;&#x89E3;&#x5230;&#x6570;&#x7EC4;a&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;sep&#xFF0C;&#x4F7F;&#x7528;FS</td>
</tr>
<tr>
<td>sprintf(fmt, expr-list)</td>
<td>&#x7EC4;&#x5408;&#x683C;&#x5F0F;fmt&#x548C;&#x53C2;&#x6570;&#x5217;&#x8868;expr-list&#xFF0C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5B57;&#x7B26;&#x4E32;</td>
</tr>
<tr>
<td>sub(r, s [, t])</td>
<td>&#x548C;gsub&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x66FF;&#x6362;&#x7B2C;&#x4E00;&#x6B21;&#x5339;&#x914D;</td>
</tr>
<tr>
<td>substr(s, i [, n])</td>
<td>&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;s&#x4E2D;&#xFF0C;&#x4ECE;&#x4F4D;&#x7F6E;i&#x5F00;&#x59CB;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x4E3A;n&#x7684;&#x5B50;&#x4E32;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;n&#xFF0C;&#x4F7F;&#x7528;s&#x7684;&#x5269;&#x4F59;&#x90E8;&#x5206;</td>
</tr>
<tr>
<td>tolower(str)</td>
<td>&#x5C06;str&#x4E2D;&#x6240;&#x6709;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x8F6C;&#x4E3A;&#x5C0F;&#x5199;&#x5E76;&#x8FD4;&#x56DE;</td>
</tr>
<tr>
<td>toupper(str)</td>
<td>&#x5C06;str&#x4E2D;&#x6240;&#x6709;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#x8F6C;&#x4E3A;&#x5927;&#x5199;&#x5E76;&#x8FD4;&#x56DE;</td>
</tr>
</tbody>
</table>
<ul>
<li>awk&#x4E2D;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x4E3A;1(&#x5927;&#x90E8;&#x5206;&#x5E38;&#x89C1;&#x8BED;&#x8A00;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x4E3A;0)</li>
</ul>
<p><strong>&#x5176;&#x5B83;&#x51FD;&#x6570;</strong></p>
<table>
<thead>
<tr>
<th>&#x51FD;&#x6570;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>system(cmd-line)</td>
<td>&#x6267;&#x884C;&#x547D;&#x4EE4;&#x884C;&#x6307;&#x4EE4;&#xFF0C;&#x8FD4;&#x56DE;&#x6307;&#x4EE4;&#x7684;&#x9000;&#x51FA;&#x7801;</td>
</tr>
<tr>
<td>printf(fmt, expr-list)</td>
<td>&#x7EC4;&#x5408;&#x683C;&#x5F0F;fmt&#x548C;&#x53C2;&#x6570;&#x5217;&#x8868;expr-list&#xFF0C;&#x5E76;&#x6253;&#x5370;</td>
</tr>
</tbody>
</table>
<p><strong>&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;</strong></p>
<ul>
<li>&#x8BED;&#x6CD5; <code>function name(parameter list) { statements }</code></li>
<li>&#x51FD;&#x6570;&#x4F53;&#x901A;&#x5E38;&#x5305;&#x542B;&#x4E00;&#x4E2A;return&#x8BED;&#x53E5; <code>return expression</code></li>
<li>&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x653E;&#x5728;&#x4EE3;&#x7801;&#x7684;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;</li>
<li>&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x653E;&#x5728;&#x5176;&#x4ED6;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x8C03;&#x7528;&#x65F6;&#x4F7F;&#x7528;&#x591A;&#x4E2A;-f&#x9009;&#x9879;&#xFF0C;&#x4F8B;&#x5982;<code>awk -f main.awk -f userlib.awk file1</code></li>
</ul>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;</span></span><br><span class="line"><span class="keyword">function</span> max(a,b){</span><br><span class="line">    <span class="built_in">return</span> a&gt;b ? a : b</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h3 id="u9AD8_u7EA7I/O"><a href="#u9AD8_u7EA7I/O" class="headerlink" title="&#x9AD8;&#x7EA7;I/O"></a>&#x9AD8;&#x7EA7;I/O</h3><p><strong>getline</strong></p>
<p><code>getline</code> &#x4FEE;&#x6539;$0&#x4E3A;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF1B;&#x4FEE;&#x6539;NF,NR,FNR<br><code>getline var</code> &#x4FEE;&#x6539;var&#x4E3A;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF1B;&#x4FEE;&#x6539;NR,FNR<br><code>getline &lt; file</code> &#x4FEE;&#x6539;$0&#x4E3A;&#x6587;&#x4EF6;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF1B;&#x4FEE;&#x6539;NF<br><code>getline var &lt; file</code> &#x4FEE;&#x6539;var&#x4E3A;&#x6587;&#x4EF6;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;<br><code>command | getline [var]</code> &#x6267;&#x884C;&#x547D;&#x4EE4;command&#x5E76;&#x5C06;&#x7BA1;&#x9053;&#x8F93;&#x51FA;&#x5230;$0&#x6216;var</p>
<ul>
<li>getline&#x5173;&#x952E;&#x5B57;&#x53EF;&#x4EE5;&#x4E3B;&#x52A8;&#x7684;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x3002;&#x6570;&#x636E;&#x6765;&#x6E90;&#x5305;&#x62EC;&#x5F53;&#x524D;&#x6D41;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3001;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x3001;&#x7BA1;&#x9053;</li>
<li>getline&#x4E0D;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x3002;1&#x8868;&#x793A;&#x8BFB;&#x53D6;&#x6210;&#x529F;&#xFF1B;0&#x8868;&#x793A;&#x5230;&#x8FBE;&#x6587;&#x4EF6;&#x7ED3;&#x5C3E;&#xFF1B;-1&#x8868;&#x793A;&#x53D1;&#x751F;&#x9519;&#x8BEF;</li>
<li>getline&#x4E0D;&#x6539;&#x53D8;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x3002;getline&#x8C03;&#x7528;&#x4E4B;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x5C06;&#x6309;&#x7167;&#x65B0;&#x8BB0;&#x5F55;&#x6267;&#x884C;(&#x591A;&#x4EE3;&#x7801;&#x5757;&#x65F6;&#x9700;&#x5C0F;&#x5FC3;&#x4F7F;&#x7528;)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BFB;&#x53D6;&#x5F53;&#x524D;&#x6D41;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">{</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;block1&quot;</span>,<span class="variable">$1</span></span><br><span class="line">    getline</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;block1&quot;</span>,<span class="variable">$1</span></span><br><span class="line">}</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;block2&quot;</span>,<span class="variable">$1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;</span></span><br><span class="line">BEGIN{</span><br><span class="line">    <span class="keyword">while</span>((getline &lt; <span class="string">&quot;file1&quot;</span>) &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">print</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x4ECE;&#x7BA1;&#x9053;&#x8BFB;&#x53D6;</span></span><br><span class="line"><span class="comment">#&quot;ls -l&quot;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x9700;&#x8981;&#x8C03;&#x7528;close()&#x51FD;&#x6570;</span></span><br><span class="line">BEGIN{</span><br><span class="line">    <span class="keyword">while</span>(<span class="string">&quot;ls -l&quot;</span> | getline)</span><br><span class="line">        <span class="built_in">print</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><strong>next</strong></p>
<ul>
<li>next&#x5173;&#x952E;&#x5B57;&#x7C7B;&#x4F3C;continue&#x5173;&#x952E;&#x5B57;</li>
<li>continue&#x7528;&#x5728;&#x5FAA;&#x73AF;&#x4F53;&#x5185;&#xFF0C;&#x8DF3;&#x8FC7;&#x540E;&#x7EED;&#x5904;&#x7406;&#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;</li>
<li>next&#x7528;&#x5728;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#xFF0C;&#x8DF3;&#x8FC7;&#x540E;&#x7EED;&#x7684;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#xFF0C;&#x8BFB;&#x53D6;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#&#x7B2C;&#x4E00;&#x5217;&#x4E0D;&#x4E3A;&#x6570;&#x5B57;&#x5F00;&#x5934;&#xFF0C;&#x5219;&#x8BFB;&#x53D6;&#x4E0B;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x7B2C;&#x4E8C;&#x4E2A;&#x4EE3;&#x7801;&#x5757;</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$1</span> !~ /^[<span class="number">0</span>-<span class="number">9</span>]/)</span><br><span class="line">        next</span><br><span class="line">}</span><br><span class="line">{</span><br><span class="line">    sum += <span class="variable">$1</span></span><br><span class="line">}</span><br><span class="line">END{</span><br><span class="line">    <span class="built_in">print</span> sum</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p><strong>close()</strong></p>
<ul>
<li>&#x5173;&#x95ED;&#x4E00;&#x4E2A;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x7BA1;&#x9053;</li>
<li>&#x9700;&#x8981;&#x8C03;&#x7528;close()&#x51FD;&#x6570;&#x7684;&#x573A;&#x666F;<ul>
<li>&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6570;&#x91CF;&#x8D85;&#x8FC7;&#x7CFB;&#x7EDF;&#x9650;&#x5236;</li>
<li>&#x91CD;&#x590D;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x3002;&#x4F8B;&#x5982;&#x8FDE;&#x7EED;&#x8C03;&#x7528;2&#x6B21;date&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x6267;&#x884C;(&#x4F1A;&#x8BFB;&#x53D6;&#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;date&#x65F6;&#x7684;&#x7B2C;&#x4E8C;&#x6761;&#x8BB0;&#x5F55;)</li>
<li>&#x5148;&#x5199;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x8BFB;&#x6587;&#x4EF6;&#x65F6;</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5173;&#x95ED;&#x6587;&#x4EF6;</span></span><br><span class="line">close(<span class="string">&quot;file1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5173;&#x95ED;&#x7BA1;&#x9053;</span></span><br><span class="line">close(<span class="string">&quot;ls -l&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="u5C0F_u7ED3"><a href="#u5C0F_u7ED3" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><ul>
<li><p>&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x548C;&#x4EE3;&#x7801;&#x5757;&#x90FD;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x7701;&#x7565;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#x8868;&#x793A;&#x5339;&#x914D;&#x6210;&#x529F;&#xFF0C;&#x7701;&#x7565;&#x4EE3;&#x7801;&#x5757;&#x8868;&#x793A;{print $0}</p>
</li>
<li><p>&#x4FEE;&#x6539;&#x8F93;&#x5165;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5171;&#x6709;3&#x79CD;&#x65B9;&#x5F0F;</p>
<ul>
<li>&#x4F7F;&#x7528;-F,&#x53C2;&#x6570;&#x3002;&#x5E38;&#x7528;&#x4E8E;&#x547D;&#x4EE4;&#x884C;&#x8C03;&#x7528;</li>
<li>&#x4F7F;&#x7528;-v FS=,&#x53C2;&#x6570;&#x3002;&#x4E0D;&#x5E38;&#x7528;</li>
<li>BEGIN{FS=,}&#x3002;&#x5E38;&#x7528;&#x4E8E;&#x811A;&#x672C;</li>
</ul>
</li>
<li><p>print&#x548C;printf&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>&gt;</code>&#x548C;<code>&gt;&gt;</code>&#x5C06;&#x8F93;&#x51FA;&#x5199;&#x5165;&#x6587;&#x4EF6;</p>
</li>
<li><p>print&#x662F;&#x5173;&#x952E;&#x5B57;&#xFF1B;printf&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x9700;&#x8981;()</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <!--<a data-url="http://yoursite.com/2016/awk1/" data-id="ciky9h91n0009g8fmdks8whtz" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/program/">program</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/cics1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CICS中的服务端、客户端、网关与应用
        
      </div>
    </a>
  
  
    <a href="/2016/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/默认分组/">默认分组</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/cics/">cics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/program/">program</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/cicseci/">cicseci</a>
          </li>
        
          <li>
            <a href="/2016/cics1/">CICS中的服务端、客户端、网关与应用</a>
          </li>
        
          <li>
            <a href="/2016/awk1/">awk简介</a>
          </li>
        
          <li>
            <a href="/2016/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 wangsp<br>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/xanadu" class="mobile-nav-link">Home</a>
  
    <a href="/xanadu/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>